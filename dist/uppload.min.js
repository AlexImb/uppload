!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.uppload=e():t.uppload=e()}(this,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=16)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={},o=void 0;e.addGlobalEvent=function(t,e,n){o||(o=n),i[o.meta.uniqueId]=i[o.meta.uniqueId]||{},i[o.meta.uniqueId][t]=e};e.default=function(t,e){"function"==typeof i[o.meta.uniqueId][t]&&i[o.meta.uniqueId][t](e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),o=new Uint8Array(i),a=0;a<e.length;a++)o[a]=e.charCodeAt(a);return new Blob([i],{type:n})},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(0),a=(i=o)&&i.__esModule?i:{default:i};e.default=function(t,e){return t||(t=e.meta.file),new Promise(function(n,i){var o=function(t){e.showError(t),i(t)};t?e.isFileTypeAllowed(t)?e.isFileSizeAllowed(t)?(e.isUploading=!0,e.changePage("uploading"),(0,a.default)("uploadStarted",t),setTimeout(function(){if("function"==typeof e.settings.uploadFunction)e.settings.uploadFunction(t).then(function(t){e.updateValue(t),(0,a.default)("fileUploaded",t),n(t)}).catch(function(t){(0,a.default)("uploadError",t),i(t)}).finally(function(){e.isUploading=!1,e.changePage("uploaded")});else if(e.settings.endpoint)"string"==typeof e.settings.endpoint&&(e.settings.endpoint={url:e.settings.endpoint}),fetch(e.settings.endpoint.url,{method:e.settings.endpoint.method||"POST",body:t,headers:e.settings.headers||null}).then(function(t){return t.json()}).then(function(t){(0,a.default)("fileUploaded",t),n(t)}).catch(function(t){(0,a.default)("fileUploaded",t),i(t)}).finally(function(){e.isUploading=!1,e.changePage("uploaded")});else{var o=e.i18n.errors.no_endpoint;e.showError(o),i(o)}},e.settings.minimumDelay||0)):o(e.i18n.errors.file_too_large.replace(/_FILESIZE_/g,bytesToSize(e.settings.maxFileSize))):o(e.i18n.errors.file_type_not_allowed):o(e.i18n.errors.no_file_selected)})},t.exports=e.default},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,a=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?t:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:i+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){var i,o,a={},r=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),s=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),l=null,d=0,u=[],c=n(3);function p(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=a[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(b(i.parts[r],e))}else{var s=[];for(r=0;r<i.parts.length;r++)s.push(b(i.parts[r],e));a[i.id]={id:i.id,refs:1,parts:s}}}}function h(t,e){for(var n=[],i={},o=0;o<t.length;o++){var a=t[o],r=e.base?a[0]+e.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};i[r]?i[r].parts.push(s):n.push(i[r]={id:r,parts:[s]})}return n}function f(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function v(t){var e=document.createElement("style");return t.attrs.type="text/css",g(e,t.attrs),f(t,e),e}function g(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function b(t,e){var n,i,o,a;if(e.transform&&t.css){if(!(a=e.transform(t.css)))return function(){};t.css=a}if(e.singleton){var r=d++;n=l||(l=v(e)),i=E.bind(null,n,r,!1),o=E.bind(null,n,r,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",g(e,t.attrs),f(t,e),e}(e),i=function(t,e,n){var i=n.css,o=n.sourceMap,a=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||a)&&(i=c(i));o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(r),s&&URL.revokeObjectURL(s)}.bind(null,n,e),o=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),i=function(t,e){var n=e.css,i=e.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){m(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=r()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return p(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var r=n[o];(s=a[r.id]).refs--,i.push(s)}t&&p(h(t,e),e);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete a[s.id]}}}};var y,w=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function E(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var a=document.createTextNode(o),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(a,r[e]):t.appendChild(a)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var o=(r=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),a=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[n].concat(a).concat([o]).join("\n")}var r;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(i[a]=!0)}for(o=0;o<t.length;o++){var r=t[o];"number"==typeof r[0]&&i[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),e.push(r))}},e}},function(t,e,n){(t.exports=n(5)(!1)).push([t.i,'.uppload-bg {\n  position: fixed;\n  z-index: 10000;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5); }\n\n.uppload-modal {\n  position: fixed;\n  background: #fff;\n  z-index: 11000;\n  box-sizing: border-box;\n  overflow: hidden;\n  border-radius: 0.25rem; }\n\n.uppload-modal,\n.uppload-bg {\n  display: none;\n  opacity: 0; }\n  .uppload-modal.visible,\n  .uppload-bg.visible {\n    opacity: 1;\n    display: block; }\n  .uppload-modal.fadeIn,\n  .uppload-bg.fadeIn {\n    animation: fadeIn 0.4s;\n    animation-iteration-count: 1;\n    animation-fill-mode: forwards; }\n  .uppload-modal.fadeOut,\n  .uppload-bg.fadeOut {\n    animation: fadeOut 0.4s;\n    animation-iteration-count: 1;\n    animation-fill-mode: forwards; }\n  .uppload-modal.hidden,\n  .uppload-bg.hidden {\n    display: none; }\n\n@keyframes fadeOut {\n  0% {\n    opacity: 1; }\n  100% {\n    opacity: 0; } }\n\n@keyframes fadeIn {\n  0% {\n    opacity: 0; }\n  100% {\n    opacity: 1; } }\n\n.uppload-bg::after {\n  z-index: 1;\n  cursor: pointer;\n  content: "\\D7";\n  font-family: sans-serif;\n  position: fixed;\n  font-size: 32px;\n  line-height: 0.5;\n  right: 2vw;\n  top: 2vw;\n  color: rgba(255, 255, 255, 0.5); }\n\n@media (min-width: 860px) {\n  .uppload-modal {\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 720px;\n    height: 500px; } }\n\n@media (min-width: 960px) {\n  .uppload-modal {\n    width: 800px; } }\n\n@media (max-height: 600px) {\n  .uppload-modal {\n    top: 10%;\n    transform: translate(-50%, 0%);\n    height: auto;\n    bottom: 10%; } }\n\n@media (max-width: 860px) {\n  .uppload-modal {\n    left: 0;\n    right: 0;\n    top: 10vh;\n    bottom: 0; }\n    .uppload-modal > div {\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      display: flex;\n      flex-direction: column;\n      background-color: #aaa; }\n    .uppload-modal section {\n      flex: 1 0 0; } }\n\n.uppload-modal aside {\n  background-color: #dfe6e9;\n  transition: 1s; }\n  .uppload-modal aside.hidden {\n    opacity: 0.333; }\n  .uppload-modal aside nav ul {\n    margin: 0;\n    padding: 0;\n    list-style: none; }\n    .uppload-modal aside nav ul li svg {\n      margin-right: 0.5rem;\n      opacity: 0.5;\n      transition: 0.3s; }\n    .uppload-modal aside nav ul li button {\n      text-align: left;\n      transition: 0.3s;\n      font: inherit;\n      background: none;\n      appearance: none;\n      border: none;\n      padding: 1rem;\n      border-radius: 0;\n      color: inherit; }\n      .uppload-modal aside nav ul li button:focus {\n        outline: none;\n        background-color: rgba(0, 0, 0, 0.075); }\n        .uppload-modal aside nav ul li button:focus svg {\n          opacity: 1; }\n    .uppload-modal aside nav ul li.active button {\n      background-color: #fff; }\n      .uppload-modal aside nav ul li.active button svg {\n        opacity: 1; }\n\n.uppload-modal section {\n  display: flex; }\n\n@media (min-width: 860px) {\n  .uppload-modal aside {\n    width: 200px;\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    overflow-y: auto;\n    padding-bottom: 2rem; }\n    .uppload-modal aside nav li button {\n      display: block;\n      width: 100%;\n      border-bottom: 1px solid rgba(0, 0, 0, 0.075); }\n      .uppload-modal aside nav li button:hover {\n        background-color: rgba(0, 0, 0, 0.05); }\n  .uppload-modal section {\n    position: absolute;\n    right: 0;\n    left: 200px;\n    top: 0;\n    bottom: 0;\n    overflow-y: auto; } }\n\n.uppload-branding {\n  font-size: 80%;\n  color: rgba(0, 0, 0, 0.3);\n  text-decoration: none;\n  position: fixed;\n  bottom: 1rem;\n  left: 1rem; }\n  .uppload-branding:hover {\n    color: rgba(0, 0, 0, 0.5); }\n\n@media (max-width: 860px) {\n  .uppload-modal aside nav ul {\n    white-space: nowrap;\n    overflow-x: auto; }\n  .uppload-modal aside nav li {\n    display: inline-block; } }\n\n.uppload-modal .primary-button.instagram {\n  background-color: #b53471; }\n  .uppload-modal .primary-button.instagram:hover {\n    background-color: #833471; }\n\n.uppload-modal .crop-container {\n  width: 100%;\n  display: flex;\n  flex-direction: column; }\n  .uppload-modal .crop-container #imageCropper {\n    position: absolute;\n    background-color: rgba(255, 0, 0, 0.25);\n    width: 300px;\n    height: 200px;\n    left: 100px;\n    top: 100px;\n    cursor: move; }\n  .uppload-modal .crop-container .preview {\n    flex: 1 0 0;\n    padding: 1rem;\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    overflow: auto; }\n    .uppload-modal .crop-container .preview > div > img {\n      margin: auto; }\n    .uppload-modal .crop-container .preview .croppr-container {\n      text-align: center;\n      margin: auto; }\n  .uppload-modal .crop-container .bottom-buttons {\n    text-align: center; }\n    .uppload-modal .crop-container .bottom-buttons .toolbar {\n      background: #2c3e50; }\n      .uppload-modal .crop-container .bottom-buttons .toolbar button {\n        background: none;\n        color: #fff;\n        border-radius: none;\n        padding: 1rem; }\n    .uppload-modal .crop-container .bottom-buttons .cta {\n      padding: 0.5rem 0; }\n\n.uppload-modal img {\n  max-width: 100%; }\n\n.uppload-modal #previewImage {\n  display: none;\n  max-height: 500px; }\n\n.croppr-container * {\n  user-select: none;\n  box-sizing: border-box; }\n\n.croppr-container img {\n  vertical-align: middle;\n  max-width: 100%; }\n\n.croppr {\n  position: relative;\n  display: inline-block; }\n\n.croppr-overlay {\n  background: rgba(0, 0, 0, 0.5);\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n  cursor: crosshair; }\n\n.croppr-region {\n  border: 1px dashed rgba(0, 0, 0, 0.5);\n  position: absolute;\n  z-index: 3;\n  cursor: move;\n  top: 0; }\n\n.croppr-imageClipped {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 2;\n  pointer-events: none; }\n\n.croppr-handle {\n  border: 1px solid black;\n  background-color: white;\n  width: 10px;\n  height: 10px;\n  position: absolute;\n  z-index: 4;\n  top: 0; }\n\n.preview-container {\n  width: 100%;\n  display: flex;\n  flex-direction: column; }\n  .preview-container .preview {\n    flex: 1 0 0;\n    overflow-y: auto;\n    display: flex;\n    justify-content: center;\n    flex-direction: column; }\n    .preview-container .preview img {\n      margin: 0 auto; }\n  .preview-container .bottom-buttons {\n    padding: 0.5rem;\n    text-align: center; }\n\n.camera-container {\n  width: 100%;\n  display: flex;\n  flex-direction: column; }\n  .camera-container .preview {\n    flex: 1 0 0;\n    overflow-y: auto;\n    display: flex;\n    justify-content: center;\n    flex-direction: column; }\n    .camera-container .preview video {\n      margin: 0 auto; }\n  .camera-container .bottom-buttons {\n    padding: 0.5rem;\n    text-align: center; }\n  .camera-container #cameraCanvas {\n    display: none; }\n\n.uppload-modal #dragDropElement {\n  border: 3px dashed #ddd;\n  padding: 5rem 0;\n  transition: 0.5s;\n  font-size: 125%; }\n  .uppload-modal #dragDropElement.active {\n    transform: scale(1.05);\n    background-color: whitesmoke; }\n\n.uppload-modal #dragDropFileElt {\n  display: none !important; }\n\n.uppload-modal .currentPage {\n  display: flex;\n  flex: 1 0 0; }\n\n.uppload-modal .center-middle {\n  text-align: center;\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  left: 5rem;\n  right: 5rem; }\n\n.uppload-modal .primary-button {\n  background-color: #00a8ff;\n  color: #fff;\n  border: none;\n  transition: 0.3s;\n  font: inherit;\n  font-size: 115%;\n  padding: 0.75rem 1.25rem;\n  border-radius: 0.25rem; }\n  .uppload-modal .primary-button:hover {\n    background-color: #0097e6; }\n  .uppload-modal .primary-button.secondary {\n    background-color: #95a5a6; }\n    .uppload-modal .primary-button.secondary:hover {\n      background-color: #7f8c8d; }\n\n.uppload-modal .uppload-modal p {\n  margin-top: 0;\n  margin-bottom: 1rem; }\n  .uppload-modal .uppload-modal p:last-child {\n    margin-bottom: 0; }\n\n.uppload-modal .mb-full {\n  margin-bottom: 1.5rem !important; }\n\n.uppload-modal .loading-spinner,\n.uppload-modal .uploaded-icon {\n  color: #aaa;\n  font-size: 300%;\n  margin-bottom: 1.5rem; }\n\n.uppload-modal .uploaded-icon {\n  background-color: #2ed573;\n  color: #fff;\n  padding: 1rem;\n  border-radius: 100%; }\n\n.uppload-modal .errorMessage {\n  color: rgba(255, 255, 255, 0.9);\n  background-color: #ff4757;\n  padding: 1rem;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  opacity: 0;\n  transition: 0.5s; }\n  .uppload-modal .errorMessage.visible {\n    opacity: 1; }\n\n.uppload-modal label {\n  font-size: 110%;\n  margin-bottom: 1.5rem; }\n  .uppload-modal label div {\n    margin-bottom: 1rem; }\n\n@media (max-width: 860px) {\n  .uppload-modal .errorMessage {\n    top: auto;\n    bottom: 0; }\n  .uppload-modal .center-middle {\n    left: 1.5rem;\n    right: 1.5rem; } }\n',""])},function(t,e,n){var i=n(6);"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,o);i.locals&&(t.exports=i.locals)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(0));o(n(2));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=function(){t.changePage(e);var n=t.i18n.errors[e+"_no_fetch"];t.showError(n),(0,i.default)("uploadError",n),t.isUploading=!1},a=document.querySelector("#uppload_"+t.meta.uniqueId+" #microLinkButton"),r=document.querySelector("#uppload_"+t.meta.uniqueId+" #microLinkInput");a.addEventListener("click",function(e){t.changePage("uploading"),t.isUploading=!0,setTimeout(function(){n?fetch("https://api.microlink.io/?url="+encodeURIComponent(r.value)).then(function(t){return t.json()}).then(function(e){"success"===e.status&&e.data&&e.data.image&&e.data.image.url?fetch((t.settings.fileFetchEndpoint||"https://images.weserv.nl/")+"?url="+encodeURIComponent(e.data.image.url.replace(/^https?\:\/\//i,""))).then(function(t){return t.blob()}).then(function(e){t.meta.file=e,(0,i.default)("fileSelected",t.meta.file),t.changePage("crop")}).catch(function(){o()}):o()}).catch(function(t){o()}):fetch((t.settings.fileFetchEndpoint||"https://images.weserv.nl/")+"?url="+encodeURIComponent(r.value.replace(/^https?\:\/\//i,""))).then(function(t){return t.blob()}).then(function(e){t.meta.file=e,(0,i.default)("fileSelected",t.meta.file),t.changePage("crop")}).catch(function(){o()})},t.settings.minimumDelay||0)}),r.addEventListener("keyup",function(t){t.preventDefault(),13===t.keyCode&&a.click()})},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(0);(i=o)&&i.__esModule;e.default=function(t){var e=t.modalElement.querySelector(".camera-container .preview"),n=null,i=null,o=null,a=0,r=0;function s(){var e=!1;n=t.modalElement.querySelector("#cameraVideo"),i=t.modalElement.querySelector("#cameraCanvas"),o=t.modalElement.querySelector("#clickButton"),navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getMedia({video:!0,audio:!1},function(t){if(navigator.mozGetUserMedia)n.mozSrcObject=t;else{var e=window.URL||window.webkitURL;n.src=e.createObjectURL(t)}n.play()},function(t){}),n.addEventListener("canplay",function(t){e||(r=n.videoHeight/(n.videoWidth/a),isNaN(r)&&(r=a/(4/3)),n.setAttribute("width",a),n.setAttribute("height",r),i.setAttribute("width",a),i.setAttribute("height",r),e=!0)},!1),o.addEventListener("click",function(e){!function(){var e=i.getContext("2d");if(a&&r){i.width=a,i.height=r,e.drawImage(n,0,0,a,r);var o=i.toDataURL("image/png");t.imagePreview={previous:"camera",image:o},t.changePage("preview")}}(),e.preventDefault()},!1)}setTimeout(function(){a=.8*e.offsetWidth,s()},1)},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(0),a=(i=o)&&i.__esModule?i:{default:i};e.default=function(t){var e=document.querySelector("#uppload_"+t.meta.uniqueId+" #dragDropElement"),n=document.querySelector("#uppload_"+t.meta.uniqueId+" #dragDropFileElt");e.addEventListener("drop",function(e){e.dataTransfer.items?"file"===e.dataTransfer.items[0].kind&&(t.meta.file=e.dataTransfer.items[0].getAsFile(),(0,a.default)("fileDropped",t.meta.file),(0,a.default)("fileSelected",t.meta.file),t.changePage("crop")):(t.meta.file=e.dataTransfer.files[0],(0,a.default)("fileDropped",t.meta.file),(0,a.default)("fileSelected",t.meta.file),t.changePage("crop")),e.preventDefault()}),e.addEventListener("dragenter",function(t){e.classList.add("active"),(0,a.default)("dragEnter"),t.preventDefault()}),e.addEventListener("dragleave",function(t){e.classList.remove("active"),(0,a.default)("dragLeave"),t.preventDefault()}),e.addEventListener("dragover",function(t){(0,a.default)("dragOver"),t.preventDefault()}),e.addEventListener("click",function(t){n.click(),t.preventDefault()}),document.querySelector("#uppload_"+t.meta.uniqueId+" #selectFileBtn").addEventListener("click",function(t){n.click(),t.preventDefault()}),n.addEventListener("change",function(e){t.meta.file=n.files[0],(0,a.default)("fileSelected",t.meta.file),t.changePage("crop")})},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(n(12)),o=s(n(2)),a=s(n(0)),r=s(n(1));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){var e=t.meta.file;if(!["image/png","image/jpeg","image/gif","image/jpeg"].includes(e.type))return t.changePage("upload"),t.meta.file=e,void(0,o.default)(null,t).then(function(){}).catch(function(){});var n=new FileReader;n.readAsDataURL(e),n.addEventListener("load",function(e){var n=e.target.result;if(n){var s=t.modalElement.querySelector("#previewImage");s.setAttribute("src",n),s.addEventListener("load",function(){s.style.display="block";var e=new i.default(t.modalElement.querySelector("#previewImage"),{aspectRatio:t.settings.crop.aspectRatio||null,maxSize:t.settings.crop.maxSize||null,minSize:t.settings.crop.minSize||null,onCropStart:function(t){(0,a.default)("cropStart",t)},onCropMove:function(t){(0,a.default)("cropMove",t)},onCropEnd:function(t){(0,a.default)("cropEnd",t)}});t.modalElement.querySelector("#imageCropper");t.modalElement.querySelector("#cropAndUploadBtn").addEventListener("click",function(){var n=e.getValue(),i=function(t,e,n,i,o,a){var r=document.createElement("canvas"),s=r.getContext("2d");r.width=e,r.height=n;var l=document.createElement("canvas"),d=l.getContext("2d");return l.width=t.width,l.height=t.height,d.drawImage(t,0,0),s.drawImage(l,i,o,e*a,n*a,0,0,e,n),r.toDataURL()}(s,n.width,n.height,n.x,n.y,1);t.meta.file=(0,r.default)(i),(0,o.default)(null,t).then(function(){}).catch(function(){})})})}})},t.exports=e.default},function(t,e,n){t.exports=function(){"use strict";(function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),o=Math.max(0,16-(i-t)),a=window.setTimeout(function(){e(i+o)},o);return t=i+o,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})(),function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}(),function(t){try{return new CustomEvent("test"),!1}catch(t){}function e(e,n){n=n||{bubbles:!1,cancelable:!1};var i=document.createEvent("MouseEvent");return i.initMouseEvent(e,n.bubbles,n.cancelable,t,0,0,0,0,0,!1,!1,!1,!1,0,null),i}e.prototype=Event.prototype,t.MouseEvent=e}(window);var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),n=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(i):void 0},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function e(n,i,o,a){t(this,e);var r=this;function s(t){t.stopPropagation(),document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",l),r.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{handle:r}}))}function l(t){t.stopPropagation(),r.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}this.position=n,this.constraints=i,this.cursor=o,this.eventBus=a,this.el=document.createElement("div"),this.el.className="croppr-handle",this.el.style.cursor=o,this.el.addEventListener("mousedown",function(t){t.stopPropagation(),document.addEventListener("mouseup",s),document.addEventListener("mousemove",l),r.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:r}}))})},r=function(){function n(e,i,o,a){t(this,n),this.x1=e,this.y1=i,this.x2=o,this.y2=a}return e(n,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.x1=null==t?this.x1:t,this.y1=null==e?this.y1:e,this.x2=null==n?this.x2:n,this.y2=null==i?this.y2:i,this}},{key:"width",value:function(){return Math.abs(this.x2-this.x1)}},{key:"height",value:function(){return Math.abs(this.y2-this.y1)}},{key:"resize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],i=this.x1+this.width()*n[0],o=this.y1+this.height()*n[1];return this.x1=i-t*n[0],this.y1=o-e*n[1],this.x2=this.x1+t,this.y2=this.y1+e,this}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=this.width()*t,i=this.height()*t;return this.resize(n,i,e),this}},{key:"move",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.width(),i=this.height();return t=null===t?this.x1:t,e=null===e?this.y1:e,this.x1=t,this.y1=e,this.x2=t+n,this.y2=e+i,this}},{key:"getRelativePoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],e=this.width()*t[0],n=this.height()*t[1];return[e,n]}},{key:"getAbsolutePoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],e=this.x1+this.width()*t[0],n=this.y1+this.height()*t[1];return[e,n]}},{key:"constrainToRatio",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"height";if(null!==t){switch(this.width(),this.height(),n){case"height":this.resize(this.width(),this.width()*t,e);break;case"width":this.resize(1*this.height()/t,this.height(),e);break;default:this.resize(this.width(),this.width()*t,e)}return this}}},{key:"constrainToBoundary",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],i=this.getAbsolutePoint(n),a=o(i,2),r=a[0],s=a[1],l=r,d=s,u=t-r,c=e-s,p=-2*n[0]+1,h=-2*n[1]+1,f=null,m=null;switch(p){case-1:f=l;break;case 0:f=2*Math.min(l,u);break;case 1:f=u}switch(h){case-1:m=d;break;case 0:m=2*Math.min(d,c);break;case 1:m=c}if(this.width()>f){var v=f/this.width();this.scale(v,n)}if(this.height()>m){var g=m/this.height();this.scale(g,n)}return this}},{key:"constrainToSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(a&&(a>1?(t=1*e/a,i*=a):a<1&&(e=t*a,n=1*i/a)),t&&this.width()>t){var r=t,s=null===a?this.height():e;this.resize(r,s,o)}if(e&&this.height()>e){var l=null===a?this.width():t,d=e;this.resize(l,d,o)}if(n&&this.width()<n){var u=n,c=null===a?this.height():i;this.resize(u,c,o)}if(i&&this.height()<i){var p=null===a?this.width():n,h=i;this.resize(p,h,o)}return this}}]),n}();function s(t){t.preventDefault();var e=t.changedTouches[0];e.target.dispatchEvent(new MouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[t.type],{bubbles:!0,cancelable:!0,view:window,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY}))}var l=[{position:[0,0],constraints:[1,0,0,1],cursor:"nw-resize"},{position:[.5,0],constraints:[1,0,0,0],cursor:"n-resize"},{position:[1,0],constraints:[1,1,0,0],cursor:"ne-resize"},{position:[1,.5],constraints:[0,1,0,0],cursor:"e-resize"},{position:[1,1],constraints:[0,1,1,0],cursor:"se-resize"},{position:[.5,1],constraints:[0,0,1,0],cursor:"s-resize"},{position:[0,1],constraints:[0,0,1,1],cursor:"sw-resize"},{position:[0,.5],constraints:[0,0,0,1],cursor:"w-resize"}];function d(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)}return function(o){function a(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t(this,a),i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,n,o))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,o),e(a,[{key:"getValue",value:function(t){return n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getValue",this).call(this,t)}},{key:"setImage",value:function(t){return n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setImage",this).call(this,t)}},{key:"destroy",value:function(){return n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this)}},{key:"moveTo",value:function(t,e){return this.box.move(t,e),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"resizeTo",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[.5,.5];return this.box.resize(t,e,n),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"scaleBy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.5,.5];return this.box.scale(t,e),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"reset",value:function(){return this.box=this.initializeBox(this.options),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}}]),a}(function(){function n(e,i){var o=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t(this,n),this.options=n.parseOptions(i||{}),!e.nodeName&&null==(e=document.querySelector(e)))throw"Unable to find element.";if(!e.getAttribute("src"))throw"Image src not provided.";this._initialized=!1,this._restore={parent:e.parentNode,element:e},a||(0===e.width||0===e.height?e.onload=function(){o.initialize(e)}:this.initialize(e))}return e(n,[{key:"initialize",value:function(t){this.createDOM(t),this.options.convertToPixels(this.cropperEl),this.attachHandlerEvents(),this.attachRegionEvents(),this.attachOverlayEvents(),this.box=this.initializeBox(this.options),this.redraw(),this._initialized=!0,null!==this.options.onInitialize&&this.options.onInitialize(this)}},{key:"createDOM",value:function(t){var e;this.containerEl=document.createElement("div"),this.containerEl.className="croppr-container",this.eventBus=this.containerEl,(e=this.containerEl).addEventListener("touchstart",s),e.addEventListener("touchend",s),e.addEventListener("touchmove",s),this.cropperEl=document.createElement("div"),this.cropperEl.className="croppr",this.imageEl=document.createElement("img"),this.imageEl.setAttribute("src",t.getAttribute("src")),this.imageEl.setAttribute("alt",t.getAttribute("alt")),this.imageEl.className="croppr-image",this.imageClippedEl=this.imageEl.cloneNode(),this.imageClippedEl.className="croppr-imageClipped",this.regionEl=document.createElement("div"),this.regionEl.className="croppr-region",this.overlayEl=document.createElement("div"),this.overlayEl.className="croppr-overlay";var n=document.createElement("div");n.className="croppr-handleContainer",this.handles=[];for(var i=0;i<l.length;i++){var o=new a(l[i].position,l[i].constraints,l[i].cursor,this.eventBus);this.handles.push(o),n.appendChild(o.el)}this.cropperEl.appendChild(this.imageEl),this.cropperEl.appendChild(this.imageClippedEl),this.cropperEl.appendChild(this.regionEl),this.cropperEl.appendChild(this.overlayEl),this.cropperEl.appendChild(n),this.containerEl.appendChild(this.cropperEl),t.parentElement.replaceChild(this.containerEl,t)}},{key:"setImage",value:function(t){var e=this;return this.imageEl.onload=function(){e.box=e.initializeBox(e.options),e.redraw()},this.imageEl.src=t,this.imageClippedEl.src=t,this}},{key:"destroy",value:function(){this._restore.parent.replaceChild(this._restore.element,this.containerEl)}},{key:"initializeBox",value:function(t){var e=t.startSize.width,n=t.startSize.height,i=new r(0,0,e,n);i.constrainToRatio(t.aspectRatio,[.5,.5]);var o=t.minSize,a=t.maxSize;i.constrainToSize(a.width,a.height,o.width,o.height,[.5,.5],t.aspectRatio);var s=this.cropperEl.offsetWidth,l=this.cropperEl.offsetHeight;i.constrainToBoundary(s,l,[.5,.5]);var d=this.cropperEl.offsetWidth/2-i.width()/2,u=this.cropperEl.offsetHeight/2-i.height()/2;return i.move(d,u),i}},{key:"redraw",value:function(){var t=this,e=Math.round(this.box.width()),n=Math.round(this.box.height()),i=Math.round(this.box.x1),o=Math.round(this.box.y1),a=Math.round(this.box.x2),r=Math.round(this.box.y2);window.requestAnimationFrame(function(){t.regionEl.style.transform="translate("+i+"px, "+o+"px)",t.regionEl.style.width=e+"px",t.regionEl.style.height=n+"px",t.imageClippedEl.style.clip="rect("+o+"px, "+a+"px, "+r+"px, "+i+"px)";for(var s=t.box.getAbsolutePoint([.5,.5]),l=s[0]-t.cropperEl.offsetWidth/2>>31,d=s[1]-t.cropperEl.offsetHeight/2>>31,u=(l^d)+d+d+4,c=-2*u+8,p=0;p<t.handles.length;p++){var h=t.handles[p],f=h.el.offsetWidth,m=h.el.offsetHeight,v=i+e*h.position[0]-f/2,g=o+n*h.position[1]-m/2;h.el.style.transform="translate("+Math.round(v)+"px, "+Math.round(g)+"px)",h.el.style.zIndex=c==p?5:4}})}},{key:"attachHandlerEvents",value:function(){var t=this.eventBus;t.addEventListener("handlestart",this.onHandleMoveStart.bind(this)),t.addEventListener("handlemove",this.onHandleMoveMoving.bind(this)),t.addEventListener("handleend",this.onHandleMoveEnd.bind(this))}},{key:"attachRegionEvents",value:function(){var t=this.eventBus;function e(e){e.stopPropagation(),t.dispatchEvent(new CustomEvent("regionmove",{detail:{mouseX:e.clientX,mouseY:e.clientY}}))}function n(i){i.stopPropagation(),document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",e),t.dispatchEvent(new CustomEvent("regionend",{detail:{mouseX:i.clientX,mouseY:i.clientY}}))}this.regionEl.addEventListener("mousedown",function(i){i.stopPropagation(),document.addEventListener("mouseup",n),document.addEventListener("mousemove",e),t.dispatchEvent(new CustomEvent("regionstart",{detail:{mouseX:i.clientX,mouseY:i.clientY}}))}),t.addEventListener("regionstart",this.onRegionMoveStart.bind(this)),t.addEventListener("regionmove",this.onRegionMoveMoving.bind(this)),t.addEventListener("regionend",this.onRegionMoveEnd.bind(this))}},{key:"attachOverlayEvents",value:function(){var t=4,e=this,n=null;function i(t){t.stopPropagation(),e.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function o(t){t.stopPropagation(),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",i),1!==e.box.width()||1!==e.box.height()?e.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{mouseX:t.clientX,mouseY:t.clientY}})):e.box=n}this.overlayEl.addEventListener("mousedown",function(a){a.stopPropagation(),document.addEventListener("mouseup",o),document.addEventListener("mousemove",i);var s=e.cropperEl.getBoundingClientRect(),l=a.clientX-s.left,d=a.clientY-s.top;n=e.box,e.box=new r(l,d,l+1,d+1),e.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:e.handles[t]}}))})}},{key:"onHandleMoveStart",value:function(t){var e=t.detail.handle,n=[1-e.position[0],1-e.position[1]],i=this.box.getAbsolutePoint(n),a=o(i,2),r=a[0],s=a[1];this.activeHandle={handle:e,originPoint:n,originX:r,originY:s},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onHandleMoveMoving",value:function(t){var e=t.detail,n=e.mouseX,i=e.mouseY,o=this.cropperEl.getBoundingClientRect();n-=o.left,i-=o.top,n<0?n=0:n>o.width&&(n=o.width),i<0?i=0:i>o.height&&(i=o.height);var a=this.activeHandle.originPoint.slice(),s=this.activeHandle.originX,l=this.activeHandle.originY,d=this.activeHandle.handle,u=1===d.constraints[0],c=1===d.constraints[1],p=1===d.constraints[2],h=1===d.constraints[3],f=(h||c)&&(u||p),m=h||c?s:this.box.x1,v=h||c?s:this.box.x2,g=u||p?l:this.box.y1,b=u||p?l:this.box.y2;m=h?n:m,v=c?n:v,g=u?i:g,b=p?i:b;var y=!1,w=!1;if((h||c)&&(y=h?n>s:n<s),(u||p)&&(w=u?i>l:i<l),y){var E=m;m=v,v=E,a[0]=1-a[0]}if(w){var x=g;g=b,b=x,a[1]=1-a[1]}var k=new r(m,g,v,b);if(this.options.aspectRatio){var _=this.options.aspectRatio,S=!1;f?S=i>k.y1+_*k.width()||i<k.y2-_*k.width():(u||p)&&(S=!0);var M=S?"width":"height";k.constrainToRatio(_,a,M)}var C=this.options.minSize,z=this.options.maxSize;k.constrainToSize(z.width,z.height,C.width,C.height,a,this.options.aspectRatio);var L=this.cropperEl.offsetWidth,I=this.cropperEl.offsetHeight;k.constrainToBoundary(L,I,a),this.box=k,this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onHandleMoveEnd",value:function(t){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"onRegionMoveStart",value:function(t){var e=t.detail,n=e.mouseX,i=e.mouseY,o=this.cropperEl.getBoundingClientRect();n-=o.left,i-=o.top,this.currentMove={offsetX:n-this.box.x1,offsetY:i-this.box.y1},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onRegionMoveMoving",value:function(t){var e=t.detail,n=e.mouseX,i=e.mouseY,o=this.currentMove,a=o.offsetX,r=o.offsetY,s=this.cropperEl.getBoundingClientRect();n-=s.left,i-=s.top,this.box.move(n-a,i-r),this.box.x1<0&&this.box.move(0,null),this.box.x2>s.width&&this.box.move(s.width-this.box.width(),null),this.box.y1<0&&this.box.move(null,0),this.box.y2>s.height&&this.box.move(null,s.height-this.box.height()),this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onRegionMoveEnd",value:function(t){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"getValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t&&(t=this.options.returnMode),"real"==t){var e=this.imageEl.naturalWidth,n=this.imageEl.naturalHeight,i=e/this.imageEl.offsetWidth,o=n/this.imageEl.offsetHeight;return{x:Math.round(this.box.x1*i),y:Math.round(this.box.y1*o),width:Math.round(this.box.width()*i),height:Math.round(this.box.height()*o)}}if("ratio"==t){var a=this.imageEl.offsetWidth,r=this.imageEl.offsetHeight;return{x:d(this.box.x1/a,3),y:d(this.box.y1/r,3),width:d(this.box.width()/a,3),height:d(this.box.height()/r,3)}}if("raw"==t)return{x:Math.round(this.box.x1),y:Math.round(this.box.y1),width:Math.round(this.box.width()),height:Math.round(this.box.height())}}}],[{key:"parseOptions",value:function(t){var e={aspectRatio:null,maxSize:{width:null,height:null},minSize:{width:null,height:null},startSize:{width:100,height:100,unit:"%"},returnMode:"real",onInitialize:null,onCropStart:null,onCropMove:null,onCropEnd:null},n=null;void 0!==t.aspectRatio&&("number"==typeof t.aspectRatio?n=t.aspectRatio:t.aspectRatio instanceof Array&&(n=t.aspectRatio[1]/t.aspectRatio[0]));var i=null;void 0!==t.maxSize&&null!==t.maxSize&&(i={width:t.maxSize[0]||null,height:t.maxSize[1]||null,unit:t.maxSize[2]||"px"});var o=null;void 0!==t.minSize&&null!==t.minSize&&(o={width:t.minSize[0]||null,height:t.minSize[1]||null,unit:t.minSize[2]||"px"});var a=null;void 0!==t.startSize&&null!==t.startSize&&(a={width:t.startSize[0]||null,height:t.startSize[1]||null,unit:t.startSize[2]||"%"});var r=null;"function"==typeof t.onInitialize&&(r=t.onInitialize);var s=null;"function"==typeof t.onCropStart&&(s=t.onCropStart);var l=null;"function"==typeof t.onCropEnd&&(l=t.onCropEnd);var d=null;"function"==typeof t.onUpdate&&(console.warn("Croppr.js: `onUpdate` is deprecated and will be removed in the next major release. Please use `onCropMove` or `onCropEnd` instead."),d=t.onUpdate),"function"==typeof t.onCropMove&&(d=t.onCropMove);var u=null;if(void 0!==t.returnMode){var c=t.returnMode.toLowerCase();if(-1===["real","ratio","raw"].indexOf(c))throw"Invalid return mode.";u=c}var p=function(t,e){return null!==t?t:e};return{aspectRatio:p(n,e.aspectRatio),maxSize:p(i,e.maxSize),minSize:p(o,e.minSize),startSize:p(a,e.startSize),returnMode:p(u,e.returnMode),onInitialize:p(r,e.onInitialize),onCropStart:p(s,e.onCropStart),onCropMove:p(d,e.onCropMove),onCropEnd:p(l,e.onCropEnd),convertToPixels:function(t){for(var e=t.offsetWidth,n=t.offsetHeight,i=["maxSize","minSize","startSize"],o=0;o<i.length;o++){var a=i[o];null!==this[a]&&("%"==this[a].unit&&(null!==this[a].width&&(this[a].width=this[a].width/100*e),null!==this[a].height&&(this[a].height=this[a].height/100*n)),delete this[a].unit)}}}}}]),n}())}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(1),a=(i=o)&&i.__esModule?i:{default:i};e.default=function(t){var e=t.imagePreview.image,n=t.imagePreview.previous,i=t.modalElement.querySelector("#previewImage");i.setAttribute("src",e),i.addEventListener("load",function(){i.style.display="block"});var o=t.modalElement.querySelector("#backBtn");n||(o.style.display="none"),o.addEventListener("click",function(){t.changePage(n)}),t.modalElement.querySelector("#continueBtn").addEventListener("click",function(){t.meta.file=(0,a.default)(e),t.changePage("crop")})},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n(11)),o=l(n(13)),a=l(n(10)),r=l(n(9)),s=l(n(8));function l(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){for(var e=t.settings.services,n=t.i18n,l={preview:{html:'\n\t\t\t\t<div class="preview-container">\n\t\t\t\t\t<div class="preview">\n\t\t\t\t\t\t<img id="previewImage">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bottom-buttons">\n\t\t\t\t\t\t<div class="cta">\n\t\t\t\t\t\t\t<button class="primary-button secondary" id="backBtn"><i class="fas fa-arrow-left"></i> &nbsp;Back</button>\n\t\t\t\t\t\t\t<button class="primary-button" id="continueBtn">Continue &nbsp;<i class="fas fa-arrow-right"></i></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n            ',init:function(){(0,o.default)(t)}},crop:{html:'\n\t\t\t\t<div class="crop-container">\n\t\t\t\t\t<div class="preview">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img id="previewImage" draggable="false">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bottom-buttons">\n\t\t\t\t\t\t<div class="cta"><button class="primary-button" id="cropAndUploadBtn">Crop &amp; upload</button></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n            ',init:function(){(0,i.default)(t)}},uploading:{html:'\n                <div class="center-middle">\n                    <div><i class="fas fa-spinner fa-spin loading-spinner"></i></div>\n                    <div>'+n.uploading+"</div>\n                </div>\n            "},uploaded:{html:'\n                <div class="center-middle">\n                    <div><i class="fas fa-check uploaded-icon"></i></div>\n                    <div>'+n.uploaded+"</div>\n                </div>\n            "},upload:{title:"Upload file",icon:'<i class="fas fa-fw fa-upload"></i>',html:'\n                <div class="center-middle">\n                    <div id="dragDropElement" class="mb-full">'+n.select_file.drag_here+'</div>\n                    <p class="mb-full"><em>'+n.select_file.or+'</em></p>\n                    <button id="selectFileBtn" class="primary-button">'+n.select_file.choose_file+'</button>\n                    <input type="file" id="dragDropFileElt">\n                </div>\n            ',init:function(){(0,a.default)(t)}},camera:{icon:'<svg class="svg-inline--fa fa-camera fa-w-16 fa-fw" aria-hidden="true" data-prefix="fas" data-icon="camera" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"></path></svg>',title:"Camera",html:'\n\t\t\t\t<div class="camera-container">\n\t\t\t\t\t<div class="preview">\n\t\t\t\t\t\t<video id="cameraVideo">Video stream not available.</video>\n\t\t\t\t\t\t<canvas id="cameraCanvas"></canvas>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bottom-buttons">\n\t\t\t\t\t\t<div class="cta"><button class="primary-button" id="clickButton">Click photo</button></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t',init:function(){(0,r.default)(t)}},link:{icon:'<i class="fas fa-fw fa-link"></i>',title:"Import from URL",html:'\n                <div class="center-middle">\n                    <label>\n                        <div>'+n.link.post_url+'</div>\n                        <input id="microLinkInput" type="text" value="https://www.w3schools.com/howto/img_paris.jpg" placeholder="https://www.w3schools.com/howto/img_paris.jpg">\n                    </label>\n                    <button id="microLinkButton" class="primary-button">'+n.link.import+"</button>\n                </div>\n            ",init:function(){(0,s.default)(t,"link")}},facebook:{icon:'<i class="fab fa-fw fa-facebook"></i>',title:"Facebook",html:""},drive:{icon:'<i class="fab fa-fw fa-google-drive"></i>',title:"Google Drive",html:""},dropbox:{icon:'<i class="fab fa-fw fa-dropbox"></i>',title:"Dropbox",html:""},instagram:{icon:'<i class="fab fa-fw fa-instagram"></i>',title:"Instagram",html:'\n                <div class="center-middle">\n                    <label>\n                        <div>'+n.instagram.post_url+'</div>\n                        <input id="microLinkInput" type="text" value="https://www.instagram.com/p/BeV6tOhFUor" placeholder="https://www.instagram.com/p/BeV6tOhFUor">\n                    </label>\n                    <button id="microLinkButton" class="primary-button instagram">'+n.instagram.import+"</button>\n                </div>\n            ",init:function(){(0,s.default)(t,"instagram",!0)}}},d="",u=0;u<e.length;u++){var c=l[e[u]];c&&(d+='\n                <li class="button_service button_service_'+e[u]+'"><button>'+(c.icon||"")+c.title+"</button></li>\n            ")}return l.navbar={html:"\n            <aside>\n                <nav>\n                    <ul>\n                        "+d+'\n                    </ul>\n                </nav>\n                <a class="uppload-branding" href="https://github.com/elninotech/uppload" target="_blank" rel="noopener noreferrer">Get Uppload</a>\n            </aside>\n        '},l},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={uploading:"Uploading...",uploaded:"Uploaded",select_file:{drag_here:"Drag and drop here to upload",choose_file:"Choose a file",or:"or"},instagram:{post_url:"Instagram post URL",import:"Import from Instagram"},link:{post_url:"Link to file",import:"Import from URL"},error:"Error",errors:{no_endpoint:"No endpoint or upload function found",no_file_selected:"You have not selected a file",file_type_not_allowed:"This file type is not allowed",file_too_large:"File should be smaller than _FILESIZE_",instagram_no_fetch:"Unable to fetch this image from Instagram"}},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),r=d(a),s=d(n(15)),l=d(n(14));d(n(7));function d(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.meta={uniqueId:Math.random().toString(36).slice(2),file:null},this.settings=e||{},this.i18n=this.settings.i18n||s.default,this.isOpen=!1,this.isUploading=!1,this.value=null,this.currentPage=this.settings.defaultService||"upload",this.settings.services=this.settings.services||["upload","camera","link","instagram"],this.settings.allowedTypes=this.settings.allowedTypes||"*",this.settings.crop=this.settings.crop||{},this.settings.maxFileSize=parseInt(this.settings.maxFileSize)||"infinite",this.isFileTypeAllowed=this.settings.isFileTypeAllowed||function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.meta.file;if("object"===i(n.settings.allowedTypes)&&n.settings.allowedTypes.length>0){if(n.settings.allowedTypes.includes(t.type))return!0}else{if(n.settings.allowedTypes===t.type)return!0;if("*"===n.settings.allowedTypes)return!0;if(t.type.includes(n.settings.allowedTypes+"/"))return!0}return!1},this.isFileSizeAllowed=this.settings.isFileSizeAllowed||function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.meta.file;return"infinite"===n.settings.maxFileSize||n.settings.maxFileSize>t.size},this.services=(0,l.default)(this),this.backgroundElement=document.createElement("div"),this.backgroundElement.classList.add("uppload-bg"),document.body.appendChild(this.backgroundElement),this.modalElement=document.createElement("div"),this.modalElement.classList.add("uppload-modal"),this.modalElement.setAttribute("id","uppload_"+this.meta.uniqueId),this.modalElement.innerHTML="\n        <div>\n            "+this.services.navbar.html+'\n            <section>\n                <div class="errorMessage"></div>\n                <div class="currentPage"></div>\n            </section>\n        </div>\n        ',document.body.appendChild(this.modalElement);for(var o=document.querySelectorAll("#uppload_"+this.meta.uniqueId+" .button_service"),a=function(t){var e=o[t];e.addEventListener("click",function(){n.changePage(e.className.replace("button_service button_service_",""))})},r=0;r<o.length;r++)a(r);this.backgroundElement.addEventListener("click",this.closeModal.bind(this)),window.addEventListener("keyup",function(t){27!==t.keyCode&&27!==t.which&&"Escape"!==t.key&&"Escape"!==t.code||n.backgroundElement.click()}),this.settings.value&&this.updateValue(this.settings.value,1),this.settings.call=this.settings.call||["[data-uppload-button]"];for(r=0;r<this.settings.call.length;r++)for(var d=document.querySelectorAll(this.settings.call[r]),u=0;u<d.length;u++)d[u].addEventListener("click",this.openModal.bind(this))}return o(t,[{key:"showError",value:function(t){var e=this;(0,r.default)("fileError",t),document.querySelector("#uppload_"+this.meta.uniqueId+" .errorMessage").innerHTML="<strong>"+this.i18n.error+": </strong>"+t+".",document.querySelector("#uppload_"+this.meta.uniqueId+" .errorMessage").classList.add("visible"),setTimeout(function(){document.querySelector("#uppload_"+e.meta.uniqueId+" .errorMessage").classList.remove("visible")},this.settings.errorDelay||3e3)}},{key:"on",value:function(t,e){(0,a.addGlobalEvent)(t,e,this)}},{key:"updateValue",value:function(t){for(var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.settings.bind||["[data-uppload-value]"],o=0;o<i.length;o++){var a=document.querySelector(i[o]);a&&("IMG"===a.tagName?a.setAttribute("src",t):a.setAttribute("value",t),a.classList.add("uppload-"+(0===n?"updated":"initialized")))}this.value=t,0===n&&setTimeout(function(){e.closeModal()},this.settings.successDelay||1500)}},{key:"openModal",value:function(){var t=this;!0!==this.isOpen&&(this.changePage(this.currentPage),this.isOpen=!0,(0,r.default)("modalOpened"),this.modalElement.classList.add("visible"),this.backgroundElement.classList.add("visible"),this.modalElement.classList.add("fadeIn"),this.backgroundElement.classList.add("fadeIn"),setTimeout(function(){t.modalElement.classList.remove("fadeIn"),t.backgroundElement.classList.remove("fadeIn")},399))}},{key:"closeModal",value:function(){var t=this;!1!==this.isOpen&&(this.isOpen=!1,(0,r.default)("modalClosed"),this.modalElement.classList.add("fadeOut"),this.backgroundElement.classList.add("fadeOut"),setTimeout(function(){t.modalElement.classList.remove("fadeOut"),t.modalElement.classList.remove("visible"),t.backgroundElement.classList.remove("fadeOut"),t.backgroundElement.classList.remove("visible")},399))}},{key:"changePage",value:function(t){if(this.services[t]){document.querySelector("#uppload_"+this.meta.uniqueId+" .currentPage").innerHTML=this.services[t].html,"function"==typeof this.services[t].init&&this.services[t].init(),(0,r.default)("pageChanged",t);for(var e=document.querySelectorAll("#uppload_"+this.meta.uniqueId+" .button_service"),n=0;n<e.length;n++)e[n].classList.remove("active");var i=document.querySelector("#uppload_"+this.meta.uniqueId+" .button_service_"+t);i&&i.classList.add("active");var o=document.querySelector("#uppload_"+this.meta.uniqueId+" aside");"uploading"===t||"uploaded"===t?o.classList.add("hidden"):o.classList.remove("hidden")}}}]),t}();window.Uppload=u,e.default=u,t.exports=e.default}])});